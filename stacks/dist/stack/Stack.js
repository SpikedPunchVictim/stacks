"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Stack = void 0;
const Cache_1 = require("../Cache");
const EventRouter_1 = require("../events/EventRouter");
const RequestForChange_1 = require("../events/RequestForChange");
const ValueSerializer_1 = require("../serialize/ValueSerializer");
const UidKeeper_1 = require("../UidKeeper");
const Eventing_1 = require("../utils/Eventing");
const Bool_1 = require("../values/Bool");
const Int_1 = require("../values/Int");
const List_1 = require("../values/List");
const ObjectRef_1 = require("../values/ObjectRef");
const String_1 = require("../values/String");
const Type_1 = require("../values/Type");
const UInt_1 = require("../values/UInt");
const StackContext_1 = require("./StackContext");
const StackCreate_1 = require("./StackCreate");
const StackDelete_1 = require("./StackDelete");
const StackGet_1 = require("./StackGet");
const StackUpdate_1 = require("./StackUpdate");
class Stack extends Eventing_1.CombinedEventEmitter {
    constructor(options) {
        super();
        this.queryObject = undefined;
        this.uid = (options === null || options === void 0 ? void 0 : options.uidKeeper) || new UidKeeper_1.UidKeeper();
        this.cache = new Cache_1.Cache();
        this.router = new EventRouter_1.EventRouter();
        this.rfc = new RequestForChange_1.RequestForChangeSource(this.router);
        let serializer = new ValueSerializer_1.CompositeSerializer();
        this.serializer = serializer;
        this.context = new StackContext_1.StackContext(this, this.rfc, this.cache, this.uid, serializer);
        serializer.register(Type_1.TypeSet.Bool, new Bool_1.BoolSerializer());
        serializer.register(Type_1.TypeSet.Int, new Int_1.IntSerializer());
        serializer.register(Type_1.TypeSet.List, new List_1.ListSerializer(serializer));
        serializer.register(Type_1.TypeSet.ObjectRef, new ObjectRef_1.ObjectRefSerializer(this.context));
        serializer.register(Type_1.TypeSet.String, new String_1.StringSerializer());
        serializer.register(Type_1.TypeSet.UInt, new UInt_1.UIntSerializer());
        this.delete = new StackDelete_1.StackDelete(this.cache, this.context.orchestrator);
        this.get = new StackGet_1.StackGet(this.context);
        this.create = new StackCreate_1.StackCreate(this.get, this.context);
        this.update = new StackUpdate_1.StackUpdate(this.context);
    }
    static create(options) {
        return new Stack(options);
    }
    async bootstrap() {
        return this.context.orchestrator.boostrap();
    }
    getQueryObject() {
        return this.queryObject;
    }
    async hasId(id, model) {
        return this.context.orchestrator.hasId(id, model);
    }
    async setQueryObject(handler) {
        this.queryObject = await this.context.orchestrator.storeQueryObject(handler);
    }
    async use(plugin) {
        await plugin.setup(this, this.router);
    }
}
exports.Stack = Stack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc3RhY2svU3RhY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsb0NBQXdDO0FBQ3hDLHVEQUFpRTtBQUNqRSxpRUFBNEY7QUFFNUYsa0VBQW9GO0FBQ3BGLDRDQUFvRDtBQUNwRCxnREFBK0U7QUFDL0UseUNBQStDO0FBQy9DLHVDQUE2QztBQUM3Qyx5Q0FBK0M7QUFDL0MsbURBQXlEO0FBQ3pELDZDQUFtRDtBQUNuRCx5Q0FBd0M7QUFDeEMseUNBQStDO0FBRS9DLGlEQUE2QztBQUM3QywrQ0FBeUQ7QUFDekQsK0NBQXlEO0FBQ3pELHlDQUFnRDtBQUNoRCwrQ0FBeUQ7QUEyRHpELE1BQWEsS0FDVixTQUFRLCtCQUFvQjtJQWdCNUIsWUFBWSxPQUFzQjtRQUMvQixLQUFLLEVBQUUsQ0FBQTtRQUhGLGdCQUFXLEdBQW9CLFNBQVMsQ0FBQTtRQUs3QyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUEsT0FBTyxhQUFQLE9BQU8sdUJBQVAsT0FBTyxDQUFFLFNBQVMsS0FBSSxJQUFJLHFCQUFTLEVBQUUsQ0FBQTtRQUNoRCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksYUFBSyxFQUFFLENBQUE7UUFFeEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLHlCQUFXLEVBQUUsQ0FBQTtRQUMvQixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUkseUNBQXNCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBRWxELElBQUksVUFBVSxHQUFHLElBQUkscUNBQW1CLEVBQUUsQ0FBQTtRQUMxQyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQTtRQUU1QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksMkJBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUE7UUFFakYsVUFBVSxDQUFDLFFBQVEsQ0FBQyxjQUFPLENBQUMsSUFBSSxFQUFFLElBQUkscUJBQWMsRUFBRSxDQUFDLENBQUE7UUFDdkQsVUFBVSxDQUFDLFFBQVEsQ0FBQyxjQUFPLENBQUMsR0FBRyxFQUFFLElBQUksbUJBQWEsRUFBRSxDQUFDLENBQUE7UUFDckQsVUFBVSxDQUFDLFFBQVEsQ0FBQyxjQUFPLENBQUMsSUFBSSxFQUFFLElBQUkscUJBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFBO1FBQ2pFLFVBQVUsQ0FBQyxRQUFRLENBQUMsY0FBTyxDQUFDLFNBQVMsRUFBRSxJQUFJLCtCQUFtQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO1FBQzdFLFVBQVUsQ0FBQyxRQUFRLENBQUMsY0FBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLHlCQUFnQixFQUFFLENBQUMsQ0FBQTtRQUMzRCxVQUFVLENBQUMsUUFBUSxDQUFDLGNBQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxxQkFBYyxFQUFFLENBQUMsQ0FBQTtRQUV2RCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUkseUJBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDcEUsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLG1CQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ3JDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSx5QkFBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ3JELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSx5QkFBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUM5QyxDQUFDO0lBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFzQjtRQUNqQyxPQUFPLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQzVCLENBQUM7SUFFRCxLQUFLLENBQUMsU0FBUztRQUNaLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLENBQUE7SUFDOUMsQ0FBQztJQUVELGNBQWM7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFnQixDQUFBO0lBQ2hDLENBQUM7SUFFRCxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQVUsRUFBRSxLQUFhO1FBQ2xDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQTtJQUNwRCxDQUFDO0lBRUQsS0FBSyxDQUFDLGNBQWMsQ0FBSSxPQUFvQztRQUN4RCxJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDaEYsQ0FBQztJQUVELEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBZTtRQUN0QixNQUFNLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUN4QyxDQUFDO0NBQ0g7QUFuRUQsc0JBbUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FjaGUsIElDYWNoZSB9IGZyb20gXCIuLi9DYWNoZVwiXG5pbXBvcnQgeyBFdmVudFJvdXRlciwgSUV2ZW50Um91dGVyIH0gZnJvbSBcIi4uL2V2ZW50cy9FdmVudFJvdXRlclwiXG5pbXBvcnQgeyBJUmVxdWVzdEZvckNoYW5nZVNvdXJjZSwgUmVxdWVzdEZvckNoYW5nZVNvdXJjZSB9IGZyb20gXCIuLi9ldmVudHMvUmVxdWVzdEZvckNoYW5nZVwiXG5pbXBvcnQgeyBJTW9kZWwgfSBmcm9tIFwiLi4vTW9kZWxcIlxuaW1wb3J0IHsgQ29tcG9zaXRlU2VyaWFsaXplciwgSVZhbHVlU2VyaWFsaXplciB9IGZyb20gXCIuLi9zZXJpYWxpemUvVmFsdWVTZXJpYWxpemVyXCJcbmltcG9ydCB7IElVaWRLZWVwZXIsIFVpZEtlZXBlciB9IGZyb20gXCIuLi9VaWRLZWVwZXJcIlxuaW1wb3J0IHsgQ29tYmluZWRFdmVudEVtaXR0ZXIsIElDb21iaW5lZEV2ZW50RW1pdHRlciB9IGZyb20gXCIuLi91dGlscy9FdmVudGluZ1wiXG5pbXBvcnQgeyBCb29sU2VyaWFsaXplciB9IGZyb20gXCIuLi92YWx1ZXMvQm9vbFwiXG5pbXBvcnQgeyBJbnRTZXJpYWxpemVyIH0gZnJvbSBcIi4uL3ZhbHVlcy9JbnRcIlxuaW1wb3J0IHsgTGlzdFNlcmlhbGl6ZXIgfSBmcm9tIFwiLi4vdmFsdWVzL0xpc3RcIlxuaW1wb3J0IHsgT2JqZWN0UmVmU2VyaWFsaXplciB9IGZyb20gXCIuLi92YWx1ZXMvT2JqZWN0UmVmXCJcbmltcG9ydCB7IFN0cmluZ1NlcmlhbGl6ZXIgfSBmcm9tIFwiLi4vdmFsdWVzL1N0cmluZ1wiXG5pbXBvcnQgeyBUeXBlU2V0IH0gZnJvbSBcIi4uL3ZhbHVlcy9UeXBlXCJcbmltcG9ydCB7IFVJbnRTZXJpYWxpemVyIH0gZnJvbSBcIi4uL3ZhbHVlcy9VSW50XCJcbmltcG9ydCB7IElQbHVnaW4gfSBmcm9tIFwiLi9QbHVnaW5cIlxuaW1wb3J0IHsgU3RhY2tDb250ZXh0IH0gZnJvbSBcIi4vU3RhY2tDb250ZXh0XCJcbmltcG9ydCB7IElTdGFja0NyZWF0ZSwgU3RhY2tDcmVhdGUgfSBmcm9tIFwiLi9TdGFja0NyZWF0ZVwiXG5pbXBvcnQgeyBJU3RhY2tEZWxldGUsIFN0YWNrRGVsZXRlIH0gZnJvbSBcIi4vU3RhY2tEZWxldGVcIlxuaW1wb3J0IHsgSVN0YWNrR2V0LCBTdGFja0dldCB9IGZyb20gXCIuL1N0YWNrR2V0XCJcbmltcG9ydCB7IElTdGFja1VwZGF0ZSwgU3RhY2tVcGRhdGUgfSBmcm9tIFwiLi9TdGFja1VwZGF0ZVwiXG5cbmV4cG9ydCB0eXBlIFN0YWNrT3B0aW9ucyA9IHtcbiAgIHVpZEtlZXBlcj86IElVaWRLZWVwZXJcbn1cblxuZXhwb3J0IHR5cGUgU3RvcmVDb250ZXh0ID0ge1xuICAgbmFtZTogc3RyaW5nXG4gICB2ZXJzaW9uOiBzdHJpbmdcbiAgIHN0b3JlOiBhbnlcbn1cblxuZXhwb3J0IHR5cGUgQXBwbHlTdG9yZUNvbnRleHRIYW5kbGVyPFQ+ID0gKGNvbnRleHRzOiBTdG9yZUNvbnRleHRbXSkgPT4gUHJvbWlzZTxUPlxuXG5leHBvcnQgaW50ZXJmYWNlIElTdGFjayBleHRlbmRzIElDb21iaW5lZEV2ZW50RW1pdHRlciB7XG4gICByZWFkb25seSBjcmVhdGU6IElTdGFja0NyZWF0ZVxuICAgcmVhZG9ubHkgZGVsZXRlOiBJU3RhY2tEZWxldGVcbiAgIHJlYWRvbmx5IGdldDogSVN0YWNrR2V0XG4gICByZWFkb25seSB1cGRhdGU6IElTdGFja1VwZGF0ZVxuICAgcmVhZG9ubHkgc2VyaWFsaXplcjogSVZhbHVlU2VyaWFsaXplclxuICAgcmVhZG9ubHkgcm91dGVyOiBJRXZlbnRSb3V0ZXJcblxuICAgLyoqXG4gICAgKiBDYWxsZWQgYWZ0ZXIgYWxsIE1vZGVscyBoYXZlIGJlZW4gZGVmaW5lZC4gQ2FsbGluZ1xuICAgICogdGhpcyBtZXRob2QgaXMgb3B0aW9uYWwsIGJ1dCBwcm92aWRlcyBhIGhvb2sgZm9yXG4gICAgKiBQbHVnaW5zIHRoYXQgcmVxdWlyZSBpbml0aWFsaXphdGlvbi5cbiAgICAqL1xuICAgYm9vdHN0cmFwKCk6IFByb21pc2U8dm9pZD5cblxuICAgLyoqXG4gICAgKiBHZXRzIHRoZSBRdWVyeSBvYmplY3QgdGhhdCBoYXMgYmVlbiBzZXQuXG4gICAgKi9cbiAgIGdldFF1ZXJ5T2JqZWN0PFQ+KCk6IFQgfCB1bmRlZmluZWRcblxuICAgLyoqXG4gICAgKiBEZXRlcm1pbmVzIGlmIGFuIGlkIGlzIGFscmVhZHkgaW4gdXNlLlxuICAgICogXG4gICAgKiBAcGFyYW0gaWQgVGhlIGlkXG4gICAgKiBAcGFyYW0gbW9kZWwgVGhlIGFzc29jaWF0ZWQgTW9kZWxcbiAgICAqL1xuICAgaGFzSWQoaWQ6IHN0cmluZywgbW9kZWw6IElNb2RlbCk6IFByb21pc2U8Ym9vbGVhbj5cblxuICAgLyoqXG4gICAgKiBTZXRzIGEgY3VzdG9tIFF1ZXJ5IG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRocm91Z2hvdXQgYW4gYXBwbGljYXRpb24sXG4gICAgKiB0aGF0IGV4dGVuZHMgdGhlIGZ1bmN0aW9uYWxpdHkgdGhhdCdzIGJ1aWx0IGludG8gU3RhY2tzLlxuICAgICogXG4gICAgKiBAcGFyYW0gcXVlcnkgVGhlIGN1c3RvbSBRdWVyeSBPYmplY3RcbiAgICAqL1xuICAgc2V0UXVlcnlPYmplY3Q8VD4oaGFuZGxlcjogQXBwbHlTdG9yZUNvbnRleHRIYW5kbGVyPFQ+KTogUHJvbWlzZTx2b2lkPlxuXG5cbiAgIC8qKlxuICAgICogQWRkcyBhIFBsdWdpbiB0byB0aGUgU3RhY2tcbiAgICAqIFxuICAgICogQHBhcmFtIHBsdWdpbiBUaGUgUGx1Z2luIHRvIHVzZVxuICAgICovXG4gICB1c2UocGx1Z2luOiBJUGx1Z2luKTogUHJvbWlzZTx2b2lkPlxufVxuXG5leHBvcnQgY2xhc3MgU3RhY2tcbiAgIGV4dGVuZHMgQ29tYmluZWRFdmVudEVtaXR0ZXIgXG4gICBpbXBsZW1lbnRzIElTdGFja1xuICAge1xuICAgcmVhZG9ubHkgZ2V0OiBJU3RhY2tHZXRcbiAgIHJlYWRvbmx5IGNyZWF0ZTogSVN0YWNrQ3JlYXRlXG4gICByZWFkb25seSB1cGRhdGU6IElTdGFja1VwZGF0ZVxuICAgcmVhZG9ubHkgZGVsZXRlOiBJU3RhY2tEZWxldGVcbiAgIHJlYWRvbmx5IHVpZDogSVVpZEtlZXBlclxuICAgcmVhZG9ubHkgc2VyaWFsaXplcjogSVZhbHVlU2VyaWFsaXplclxuICAgcmVhZG9ubHkgcm91dGVyOiBJRXZlbnRSb3V0ZXJcblxuICAgcHJpdmF0ZSByZmM6IElSZXF1ZXN0Rm9yQ2hhbmdlU291cmNlXG4gICBwcml2YXRlIGNvbnRleHQ6IFN0YWNrQ29udGV4dFxuICAgcHJpdmF0ZSBjYWNoZTogSUNhY2hlXG4gICBwcml2YXRlIHF1ZXJ5T2JqZWN0OiBhbnkgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcblxuICAgY29uc3RydWN0b3Iob3B0aW9ucz86IFN0YWNrT3B0aW9ucykge1xuICAgICAgc3VwZXIoKVxuICAgICAgXG4gICAgICB0aGlzLnVpZCA9IG9wdGlvbnM/LnVpZEtlZXBlciB8fCBuZXcgVWlkS2VlcGVyKClcbiAgICAgIHRoaXMuY2FjaGUgPSBuZXcgQ2FjaGUoKVxuICAgICAgXG4gICAgICB0aGlzLnJvdXRlciA9IG5ldyBFdmVudFJvdXRlcigpXG4gICAgICB0aGlzLnJmYyA9IG5ldyBSZXF1ZXN0Rm9yQ2hhbmdlU291cmNlKHRoaXMucm91dGVyKVxuXG4gICAgICBsZXQgc2VyaWFsaXplciA9IG5ldyBDb21wb3NpdGVTZXJpYWxpemVyKClcbiAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXJcblxuICAgICAgdGhpcy5jb250ZXh0ID0gbmV3IFN0YWNrQ29udGV4dCh0aGlzLCB0aGlzLnJmYywgdGhpcy5jYWNoZSwgdGhpcy51aWQsIHNlcmlhbGl6ZXIpXG5cbiAgICAgIHNlcmlhbGl6ZXIucmVnaXN0ZXIoVHlwZVNldC5Cb29sLCBuZXcgQm9vbFNlcmlhbGl6ZXIoKSlcbiAgICAgIHNlcmlhbGl6ZXIucmVnaXN0ZXIoVHlwZVNldC5JbnQsIG5ldyBJbnRTZXJpYWxpemVyKCkpXG4gICAgICBzZXJpYWxpemVyLnJlZ2lzdGVyKFR5cGVTZXQuTGlzdCwgbmV3IExpc3RTZXJpYWxpemVyKHNlcmlhbGl6ZXIpKVxuICAgICAgc2VyaWFsaXplci5yZWdpc3RlcihUeXBlU2V0Lk9iamVjdFJlZiwgbmV3IE9iamVjdFJlZlNlcmlhbGl6ZXIodGhpcy5jb250ZXh0KSlcbiAgICAgIHNlcmlhbGl6ZXIucmVnaXN0ZXIoVHlwZVNldC5TdHJpbmcsIG5ldyBTdHJpbmdTZXJpYWxpemVyKCkpXG4gICAgICBzZXJpYWxpemVyLnJlZ2lzdGVyKFR5cGVTZXQuVUludCwgbmV3IFVJbnRTZXJpYWxpemVyKCkpXG5cbiAgICAgIHRoaXMuZGVsZXRlID0gbmV3IFN0YWNrRGVsZXRlKHRoaXMuY2FjaGUsIHRoaXMuY29udGV4dC5vcmNoZXN0cmF0b3IpXG4gICAgICB0aGlzLmdldCA9IG5ldyBTdGFja0dldCh0aGlzLmNvbnRleHQpXG4gICAgICB0aGlzLmNyZWF0ZSA9IG5ldyBTdGFja0NyZWF0ZSh0aGlzLmdldCwgdGhpcy5jb250ZXh0KVxuICAgICAgdGhpcy51cGRhdGUgPSBuZXcgU3RhY2tVcGRhdGUodGhpcy5jb250ZXh0KVxuICAgfVxuXG4gICBzdGF0aWMgY3JlYXRlKG9wdGlvbnM/OiBTdGFja09wdGlvbnMpOiBJU3RhY2sge1xuICAgICAgcmV0dXJuIG5ldyBTdGFjayhvcHRpb25zKVxuICAgfVxuXG4gICBhc3luYyBib290c3RyYXAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0Lm9yY2hlc3RyYXRvci5ib29zdHJhcCgpXG4gICB9XG5cbiAgIGdldFF1ZXJ5T2JqZWN0PFQ+KCk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5T2JqZWN0IGFzIFRcbiAgIH1cblxuICAgYXN5bmMgaGFzSWQoaWQ6IHN0cmluZywgbW9kZWw6IElNb2RlbCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5vcmNoZXN0cmF0b3IuaGFzSWQoaWQsIG1vZGVsKVxuICAgfVxuXG4gICBhc3luYyBzZXRRdWVyeU9iamVjdDxUPihoYW5kbGVyOiBBcHBseVN0b3JlQ29udGV4dEhhbmRsZXI8VD4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICB0aGlzLnF1ZXJ5T2JqZWN0ID0gYXdhaXQgdGhpcy5jb250ZXh0Lm9yY2hlc3RyYXRvci5zdG9yZVF1ZXJ5T2JqZWN0KGhhbmRsZXIpXG4gICB9XG5cbiAgIGFzeW5jIHVzZShwbHVnaW46IElQbHVnaW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5zZXR1cCh0aGlzLCB0aGlzLnJvdXRlcilcbiAgIH1cbn0iXX0=