"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AsyncEventEmitter = exports.CombinedEventEmitter = void 0;
exports.emit = emit;
exports.emitAsync = emitAsync;
const events_1 = require("events");
/**
 * Emits events from multiple objects. It will emit the event for
 * an EventEmitter and ICombinedEventEmitter source.
 *
 * @param info The Event Info used to emit an event from multiple sources
 */
async function emit(info) {
    for (let ev of info) {
        if (CombinedEventEmitter.isCombinedEventEmitter(ev.source)) {
            let combined = ev.source;
            await combined.emit(ev.event, ev.data);
            continue;
        }
        ev.source.emit(ev.event, ev.data);
    }
}
async function emitAsync(eventBus, info) {
    for (let ev of info) {
        await eventBus.emit(ev.event, ev.data);
    }
}
class CombinedEventEmitter {
    constructor() {
        this.sync = new events_1.EventEmitter();
        this.async = new AsyncEventEmitter();
    }
    static isCombinedEventEmitter(other) {
        if (other.sync == null || !(other.sync instanceof events_1.EventEmitter)) {
            return false;
        }
        if (other.async == null || !(other.async instanceof AsyncEventEmitter)) {
            return false;
        }
        return true;
    }
    async emit(event, data) {
        this.sync.emit(event, data);
        await this.async.emit(event, data);
    }
    on(event, syncHandler, asyncHandler) {
        this.sync.on(event, syncHandler);
        this.async.on(event, asyncHandler);
    }
    off(event, syncHandler, asyncHandler) {
        this.sync.off(event, syncHandler);
        this.async.off(event, asyncHandler);
    }
}
exports.CombinedEventEmitter = CombinedEventEmitter;
class AsyncEventEmitter {
    constructor() {
        this.handlers = new Map();
    }
    async emit(event, data) {
        let handlers = this.getHandlers(event);
        for (let handler of handlers) {
            // TODO: Consider running in parallel
            await handler(data);
        }
    }
    on(event, handler) {
        let handlers = this.getHandlers(event);
        handlers.splice(-1, 0, handler);
    }
    off(event, handler) {
        let handlers = this.getHandlers(event);
        for (let i = 0; i < handlers.length; ++i) {
            if (handlers[i] === handler) {
                handlers.splice(i, 1);
                return;
            }
        }
    }
    getHandlers(event) {
        let handlers = this.handlers.get(event);
        if (handlers === undefined) {
            handlers = new Array();
            this.handlers.set(event, handlers);
        }
        return handlers;
    }
}
exports.AsyncEventEmitter = AsyncEventEmitter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXZlbnRpbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvRXZlbnRpbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBc0JBLG9CQVVDO0FBRUQsOEJBSUM7QUF0Q0QsbUNBQXNDO0FBZ0J0Qzs7Ozs7R0FLRztBQUNJLEtBQUssVUFBVSxJQUFJLENBQUMsSUFBZ0I7SUFDeEMsS0FBSSxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNsQixJQUFHLG9CQUFvQixDQUFDLHNCQUFzQixDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO1lBQ3pELElBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQyxNQUErQixDQUFBO1lBQ2pELE1BQU0sUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUN0QyxTQUFRO1FBQ1gsQ0FBQztRQUVELEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQ3BDLENBQUM7QUFDSixDQUFDO0FBRU0sS0FBSyxVQUFVLFNBQVMsQ0FBQyxRQUE0QixFQUFFLElBQXFCO0lBQ2hGLEtBQUksSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUM7UUFDbEIsTUFBTSxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQ3pDLENBQUM7QUFDSixDQUFDO0FBc0NELE1BQWEsb0JBQW9CO0lBSTlCO1FBQ0csSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLHFCQUFZLEVBQUUsQ0FBQTtRQUM5QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksaUJBQWlCLEVBQUUsQ0FBQTtJQUN2QyxDQUFDO0lBRUQsTUFBTSxDQUFDLHNCQUFzQixDQUFDLEtBQVU7UUFDckMsSUFBRyxL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QUNyQyxDQUFDO1FBRUQsT0FBTyxRQUFRLENBQUE7SUFDbEIsQ0FBQztDQUNIO0FBMUNELDhDQTBDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJldmVudHNcIjtcblxuZXhwb3J0IHR5cGUgRW1pdEluZm8gPSB7XG4gICBzb3VyY2U6IEV2ZW50RW1pdHRlciB8IElDb21iaW5lZEV2ZW50RW1pdHRlcixcbiAgIGV2ZW50OiBzdHJpbmcsXG4gICBkYXRhOiBhbnlcbn1cblxuZXhwb3J0IHR5cGUgQXN5bmNFbWl0SW5mbyA9IHtcbiAgIGV2ZW50OiBzdHJpbmcsXG4gICBkYXRhOiBhbnlcbn1cblxuZXhwb3J0IHR5cGUgRXZlbnRCdXNIYW5kbGVyID0gKGRhdGE6IGFueSkgPT4gdm9pZFxuZXhwb3J0IHR5cGUgQXN5bmNFdmVudEJ1c0hhbmRsZXIgPSAoZGF0YTogYW55KSA9PiBQcm9taXNlPHZvaWQ+XG5cbi8qKlxuICogRW1pdHMgZXZlbnRzIGZyb20gbXVsdGlwbGUgb2JqZWN0cy4gSXQgd2lsbCBlbWl0IHRoZSBldmVudCBmb3JcbiAqIGFuIEV2ZW50RW1pdHRlciBhbmQgSUNvbWJpbmVkRXZlbnRFbWl0dGVyIHNvdXJjZS4gXG4gKiBcbiAqIEBwYXJhbSBpbmZvIFRoZSBFdmVudCBJbmZvIHVzZWQgdG8gZW1pdCBhbiBldmVudCBmcm9tIG11bHRpcGxlIHNvdXJjZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVtaXQoaW5mbzogRW1pdEluZm9bXSk6IFByb21pc2U8dm9pZD4ge1xuICAgZm9yKGxldCBldiBvZiBpbmZvKSB7XG4gICAgICBpZihDb21iaW5lZEV2ZW50RW1pdHRlci5pc0NvbWJpbmVkRXZlbnRFbWl0dGVyKGV2LnNvdXJjZSkpIHtcbiAgICAgICAgIGxldCBjb21iaW5lZCA9IGV2LnNvdXJjZSBhcyBJQ29tYmluZWRFdmVudEVtaXR0ZXJcbiAgICAgICAgIGF3YWl0IGNvbWJpbmVkLmVtaXQoZXYuZXZlbnQsIGV2LmRhdGEpXG4gICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBldi5zb3VyY2UuZW1pdChldi5ldmVudCwgZXYuZGF0YSlcbiAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVtaXRBc3luYyhldmVudEJ1czogSUFzeW5jRXZlbnRFbWl0dGVyLCBpbmZvOiBBc3luY0VtaXRJbmZvW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgIGZvcihsZXQgZXYgb2YgaW5mbykge1xuICAgICAgYXdhaXQgZXZlbnRCdXMuZW1pdChldi5ldmVudCwgZXYuZGF0YSlcbiAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQXN5bmNFdmVudEVtaXR0ZXIge1xuICAgZW1pdChldmVudDogc3RyaW5nLCBkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+XG4gICBvbihldmVudDogc3RyaW5nLCBoYW5kbGVyOiBBc3luY0V2ZW50QnVzSGFuZGxlcik6IHZvaWRcbiAgIG9mZihldmVudDogc3RyaW5nLCBoYW5kbGVyOiBBc3luY0V2ZW50QnVzSGFuZGxlcik6IHZvaWRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29tYmluZWRFdmVudEVtaXR0ZXIge1xuICAgc3luYzogRXZlbnRFbWl0dGVyXG4gICBhc3luYzogSUFzeW5jRXZlbnRFbWl0dGVyXG5cbiAgIC8qKlxuICAgICogRW1pdHMgYW4gZXZlbnQgdG8gYm90aCBzeW5jIGFuZCBhc3luYyBlbWl0dGVyc1xuICAgICogXG4gICAgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHRvIGVtaXRcbiAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgdG8gdGhlIGhhbmRsZXJcbiAgICAqL1xuICAgZW1pdChldmVudDogc3RyaW5nLCBkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+XG5cbiAgIC8qKlxuICAgICogU3Vic2NyaWJlcyBhIGhhbmRsZXIgdG8gYm90aCBzeW5jIGFuZCBhc3luYyBlbWl0dGVyc1xuICAgICogXG4gICAgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHRvIHN1YnNjcmliZSB0b1xuICAgICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gcGFzcyBhbG9uZyB3aXRoIHRoZSBldmVudFxuICAgICovXG4gICBvbihldmVudDogc3RyaW5nLCBzeW5jSGFuZGxlcjogRXZlbnRCdXNIYW5kbGVyLCBhc3luY0hhbmRsZXI6IEFzeW5jRXZlbnRCdXNIYW5kbGVyKTogdm9pZFxuICAgXG4gICAvKipcbiAgICAqIFVuc3Vic2NyaWJlcyBoYW5kbGVycyBmcm9tIGFuIGV2ZW50XG4gICAgKiBcbiAgICAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgdG8gdW5zdWJzY3JpYmUgZnJvbVxuICAgICogQHBhcmFtIHN5bmNIYW5kbGVyIFRoZSBzeW5jIGhhbmRsZXIgdGhhdCB3YXMgc3Vic2NyaWJlZCB0byB0aGUgZXZlbnRcbiAgICAqIEBwYXJhbSBhc3luY0hhbmRsZXIgVGhlIGFzeW5jIGhhbmRsZXIgdGhhdCB3YXMgc3Vic2NyaWJlZCB0byB0aGUgZXZlbnRcbiAgICAqL1xuICAgb2ZmKGV2ZW50OiBzdHJpbmcsIHN5bmNIYW5kbGVyOiBFdmVudEJ1c0hhbmRsZXIsIGFzeW5jSGFuZGxlcjogQXN5bmNFdmVudEJ1c0hhbmRsZXIpOiB2b2lkXG59XG5cbmV4cG9ydCBjbGFzcyBDb21iaW5lZEV2ZW50RW1pdHRlciB7XG4gICByZWFkb25seSBzeW5jOiBFdmVudEVtaXR0ZXJcbiAgIHJlYWRvbmx5IGFzeW5jOiBJQXN5bmNFdmVudEVtaXR0ZXJcblxuICAgY29uc3RydWN0b3IoKSB7XG4gICAgICB0aGlzLnN5bmMgPSBuZXcgRXZlbnRFbWl0dGVyKClcbiAgICAgIHRoaXMuYXN5bmMgPSBuZXcgQXN5bmNFdmVudEVtaXR0ZXIoKVxuICAgfVxuXG4gICBzdGF0aWMgaXNDb21iaW5lZEV2ZW50RW1pdHRlcihvdGhlcjogYW55KTogYm9vbGVhbiB7XG4gICAgICBpZihvdGhlci5zeW5jID09IG51bGwgfHwgIShvdGhlci5zeW5jIGluc3RhbmNlb2YgRXZlbnRFbWl0dGVyKSkge1xuICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmKG90aGVyLmFzeW5jID09IG51bGwgfHwgIShvdGhlci5hc3luYyBpbnN0YW5jZW9mIEFzeW5jRXZlbnRFbWl0dGVyKSkge1xuICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICB9XG5cbiAgIGFzeW5jIGVtaXQoZXZlbnQ6IHN0cmluZywgZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICB0aGlzLnN5bmMuZW1pdChldmVudCwgZGF0YSlcbiAgICAgIGF3YWl0IHRoaXMuYXN5bmMuZW1pdChldmVudCwgZGF0YSlcbiAgIH1cblxuICAgb24oZXZlbnQ6IHN0cmluZywgc3luY0hhbmRsZXI6IEV2ZW50QnVzSGFuZGxlciwgYXN5bmNIYW5kbGVyOiBBc3luY0V2ZW50QnVzSGFuZGxlcik6IHZvaWQge1xuICAgICAgdGhpcy5zeW5jLm9uKGV2ZW50LCBzeW5jSGFuZGxlcilcbiAgICAgIHRoaXMuYXN5bmMub24oZXZlbnQsIGFzeW5jSGFuZGxlcilcbiAgIH1cblxuICAgb2ZmKGV2ZW50OiBzdHJpbmcsIHN5bmNIYW5kbGVyOiBFdmVudEJ1c0hhbmRsZXIsIGFzeW5jSGFuZGxlcjogQXN5bmNFdmVudEJ1c0hhbmRsZXIpOiB2b2lkIHtcbiAgICAgIHRoaXMuc3luYy5vZmYoZXZlbnQsIHN5bmNIYW5kbGVyKVxuICAgICAgdGhpcy5hc3luYy5vZmYoZXZlbnQsIGFzeW5jSGFuZGxlcilcbiAgIH1cblxufVxuXG5leHBvcnQgY2xhc3MgQXN5bmNFdmVudEVtaXR0ZXIgaW1wbGVtZW50cyBJQXN5bmNFdmVudEVtaXR0ZXIge1xuICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPHN0cmluZywgQXN5bmNFdmVudEJ1c0hhbmRsZXJbXT5cblxuICAgY29uc3RydWN0b3IoKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzID0gbmV3IE1hcDxzdHJpbmcsIEFzeW5jRXZlbnRCdXNIYW5kbGVyW10+KClcbiAgIH1cblxuICAgYXN5bmMgZW1pdChldmVudDogc3RyaW5nLCBkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuZ2V0SGFuZGxlcnMoZXZlbnQpXG5cbiAgICAgIGZvcihsZXQgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgcnVubmluZyBpbiBwYXJhbGxlbFxuICAgICAgICAgYXdhaXQgaGFuZGxlcihkYXRhKVxuICAgICAgfVxuICAgfVxuXG4gICBvbihldmVudDogc3RyaW5nLCBoYW5kbGVyOiBBc3luY0V2ZW50QnVzSGFuZGxlcik6IHZvaWQge1xuICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5nZXRIYW5kbGVycyhldmVudClcbiAgICAgIGhhbmRsZXJzLnNwbGljZSgtMSwgMCwgaGFuZGxlcilcbiAgIH1cblxuICAgb2ZmKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEFzeW5jRXZlbnRCdXNIYW5kbGVyKTogdm9pZCB7XG4gICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmdldEhhbmRsZXJzKGV2ZW50KVxuICAgICAgXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgIGlmKGhhbmRsZXJzW2ldID09PSBoYW5kbGVyKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaSwgMSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgfVxuICAgICAgfVxuICAgfVxuXG4gICBwcml2YXRlIGdldEhhbmRsZXJzKGV2ZW50OiBzdHJpbmcpOiBBc3luY0V2ZW50QnVzSGFuZGxlcltdIHtcbiAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KVxuXG4gICAgICBpZihoYW5kbGVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICBoYW5kbGVycyA9IG5ldyBBcnJheTxBc3luY0V2ZW50QnVzSGFuZGxlcj4oKVxuICAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaGFuZGxlcnNcbiAgIH1cbn0iXX0=